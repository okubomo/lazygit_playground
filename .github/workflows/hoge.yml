name: Test Workflow

on:
  # 手動実行を可能にする
  workflow_dispatch:
    inputs:
      service_type:
        description: 'サービスの種類（省略可）'
        required: false
        default: ""
        type: choice
        options:
          - "(名前なし)"
          - "apple"
          - "banana"
          - "cocoa"

  # 特定のブランチへのプッシュで実行
  push:
    branches:
      - main
      - develop
      - 'feature/*'
      - 'hotfix/*'

  # プルリクエストでも実行
  pull_request:
    branches:
      - main
      - develop

jobs:
  test-job:
    runs-on: ubuntu-latest

    steps:
      - name: チェックアウト
        uses: actions/checkout@v4

      - name: 環境情報の表示
        run: |
          echo "🚀 ワークフローが開始されました！"
          echo "📅 実行日時: $(date '+%Y-%m-%d %H:%M:%S')"
          echo "🌳 ブランチ: ${{ github.ref_name }}"
          echo "👤 実行者: ${{ github.actor }}"
          echo "📝 コミットSHA: ${{ github.sha }}"
          echo "🏠 リポジトリ: ${{ github.repository }}"

      - name: 選択したサービス名の表示
        if: github.event.inputs.service_type
        run: |
          echo "💬 サービス名: ${{ github.event.inputs.service_type }}"

      - name: ファイル一覧の表示
        run: |
          echo "📁 ワークスペースの内容:"
          ls -la

      - name: 簡単なテスト実行
        run: |
          echo "🧪 簡単なテストを実行中..."
          sleep 2
          echo "✅ テスト完了！"

      - name: 完了メッセージ
        run: |
          echo "🎉 ワークフローが正常に完了しました！"
          echo "⏰ 実行時間: 約 $(date '+%H:%M:%S')"
          echo "✨ すべての処理が成功しました。"
